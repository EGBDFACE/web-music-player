webpackJsonp([1],{SKCP:function(t,e){},UPEl:function(t,e){},Y62I:function(t,e,s){"use strict";var a={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"lds-roller"},[e("div"),this._v(" "),e("div"),this._v(" "),e("div"),this._v(" "),e("div"),this._v(" "),e("div"),this._v(" "),e("div"),this._v(" "),e("div"),this._v(" "),e("div")])}]};var n=s("VU/8")({name:"LoadingMask"},a,!1,function(t){s("dUNL")},"data-v-6aa32653",null);e.a=n.exports},dUNL:function(t,e){},tnDH:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Dd8w"),n=s.n(a),r=s("NYxO"),i=s("gyMJ"),c=(s("IcnI"),s("8IWg"),s("nh2a")),o=s("4www"),u={name:"ArtistDetail",data:function(){return{showMoreBrief:!1,hotSongs:[]}},components:{SongList:c.a},mounted:function(){this.MHotSongs()},watch:{artistId:function(t,e){this.MHotSongs()}},props:{},computed:n()({},Object(r.c)({artistState:function(t){return t.search.artist},artistId:function(t){return t.search.artist.info.id}}),{CArtistPicUrl:function(){return this.artistState.info.picUrl+"?param=300y300?max_age=2592000"}}),methods:n()({},Object(r.b)(["setPlayFlag","setPlayList","setPlaySong"]),{MHandleMoreBriefClick:function(t){console.log(t),this.showMoreBrief=t},MHotSongs:function(){var t=this;Object(o.a)(this.artistState.songs.hotSongs.slice(0,10)).then(function(e){console.log(e),t.hotSongs=e}).catch(function(t){console.error(t.message)})},MDelArtistHotSongItem:function(t){}})},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"artist-detail"},[s("div",{staticClass:"artist-detail_header"},[s("div",{staticClass:"header-pic_viewport"},[s("img",{attrs:{src:t.CArtistPicUrl}})]),t._v(" "),s("div",{staticClass:"header-desc"},[s("div",{staticClass:"header-desc_name"},[t._v(t._s(t.artistState.info.name))]),t._v(" "),s("div",{staticClass:"header-desc_brief"},[s("p",{staticClass:"brief_detail"},[t._v(t._s(t.artistState.desc.brief))]),t._v(" "),s("input",{staticClass:"brief-more_input",attrs:{type:"checkbox",id:"show-brief-more"},on:{focus:function(e){return t.MHandleMoreBriefClick(!0)},blur:function(e){return t.MHandleMoreBriefClick(!1)}}}),t._v(" "),s("label",{staticClass:"brief-more_label",attrs:{for:"show-brief-more"}},[t._v("[更多]")]),t._v(" "),t.showMoreBrief?s("div",{staticClass:"brief-more_detail"},[s("div",{staticClass:"brief-more_detail_viewport"},[s("h1",[t._v("歌手简介")]),t._v(" "),s("p",[t._v(t._s(t.artistState.desc.brief))]),t._v(" "),t._l(t.artistState.desc.introduction,function(e,a){return s("div",{key:a},[s("h3",[t._v(t._s(e.ti))]),t._v(" "),s("p",[t._v(t._s(e.txt))])])})],2)]):t._e()]),t._v(" "),s("div",{staticClass:"header-desc_works"},[s("div",{staticClass:"works-songs"},[s("span",[t._v("单曲")]),t._v(" "),s("strong",[t._v(t._s(t.artistState.info.songSize))])]),t._v(" "),s("div",{staticClass:"works-albums"},[s("span",[t._v("专辑")]),t._v(" "),s("strong",[t._v(t._s(t.artistState.info.albumSize))])]),t._v(" "),s("div",{staticClass:"works-mvs"},[s("span",[t._v("MV")]),t._v(" "),s("strong",[t._v(t._s(t.artistState.info.mvSize))])])])])]),t._v(" "),s("div",{staticClass:"artist-detail_hot-songs"},[s("h2",[t._v("热门歌曲")]),t._v(" "),s("SongList",{attrs:{deleteItem:t.MDelArtistHotSongItem,setPlayFlag:t.setPlayFlag,setPlayList:t.setPlayList,setPlaySong:t.setPlaySong,songs:t.hotSongs}})],1),t._v(" "),s("div",{staticClass:"artist-detail_albums"})])},staticRenderFns:[]};var h=s("VU/8")(u,l,!1,function(t){s("SKCP")},"data-v-60ff5255",null).exports,g=s("Y62I"),d={name:"search",data:function(){return{inputFocus:!1,smartBoxFocus:!1,searchContext:"",songs:[],hots:[],searchSuggest:{},searchHistory:[],searchSuggestTitle:{songs:"歌曲",artists:"歌手",albums:"专辑",mvs:"MV",playlists:"歌单"}}},components:{ArtistDetail:h,SongList:c.a,LoadingMask:g.a},created:function(){var t=this;Object(i.i)().then(function(e){for(var s=[],a=0;a<5;a++)s[a]=e.data.result.hots[a].first;t.hots=s}).catch(function(t){console.error(t.message)}),this.searchContext=this.state_searchContext},watch:{state_searchContext:function(t,e){this.searchContext=t}},methods:n()({resolveSearchSuggest:function(t,e){var s=this;switch(this.setSearchLoadingFlag(!0),this.setSearchResult([]),t){case"songs":Object(i.c)(e.id).then(function(t){e.available=!0,s.setSearchLoadingFlag(!1),s.$router.push("/onplay"),s.setPlayList(e),s.setPlaySong(e),s.setPlayFlag(!0)}).catch(function(t){s.setSearchLoadingFlag(!1),console.error(t.message)});break;case"artists":Object(i.b)(e.id).then(function(t){Object(o.a)(t.data.hotSongs).then(function(t){s.setSearchLoadingFlag(!1),s.setSearchResult(t)}).catch(function(t){s.setSearchLoadingFlag(!1),console.error(t.message)})}).catch(function(t){s.setSearchLoadingFlag(!1),console.error(t.message)});break;case"albums":Object(i.a)(e.id).then(function(t){console.log(t),Object(o.a)(t.data.songs).then(function(t){s.setSearchLoadingFlag(!1),s.setSearchResult(t)}).catch(function(t){s.setSearchLoadingFlag(!1),console.error(t.message)})}).catch(function(t){s.setSearchLoadingFlag(!1),console.error(t.message)});break;case"playlists":Object(i.g)(e.id).then(function(t){Object(o.a)(t.data.playlist.tracks).then(function(t){s.setSearchLoadingFlag(!1),s.setSearchResult(t)}).catch(function(t){s.setSearchLoadingFlag(!1),console.error(t.message)})}).catch(function(t){s.setSearchLoadingFlag(!1),console.error(t.message)})}this.searchContext=e.name,this.setSearchContext(e.name),this.inputFocus=!1,this.smartBoxFocus=!1},setSearchSuggestClass:function(t){return"search-suggest-"+t},getSearchSuggestArtists:function(t){for(var e="",s=0;s<t.length;s++)e+=s>0?" / "+t[s].name:t[s].name;return e},getSearchSuggest:function(t){var e=this;t?(this.inputFocus=!0,Object(i.k)(t).then(function(t){for(var s=t.data.result,a=0;a<s.order.length;a++)if("mvs"===s.order[a]){s.order.splice(a,a+1);break}e.searchSuggest=s}).catch(function(t){e.searchSuggest={},console.error(t.message)})):this.inputFocus=!1},getSearchResult:function(t){var e=this;this.setSearchResult([]),this.setSearchLoadingFlag(!0),t&&(this.songs=[],Object(i.j)(t).then(function(s){e.searchContext=t,e.setSearchContext(t),Object(o.a)(s.data.result.songs).then(function(t){e.songs=t,e.setSearchResult(t),e.setSearchLoadingFlag(!1)}).catch(function(t){console.log(t.message),e.setSearchLoadingFlag(!1)}),-1===e.searchHistory.indexOf(t)&&e.searchHistory.push(t),e.inputFocus=!1,e.smartBoxFocus=!1,document.getElementById("searchInput").blur()}).catch(function(t){console.error(t.message)}))},setInputFocus:function(){this.inputFocus=!0},setInputBlur:function(){this.smartBoxFocus?document.getElementById("searchInput")&&document.getElementById("searchInput").focus():this.inputFocus=!1},setSmartBoxFocus:function(){this.smartBoxFocus=!0},setSmartBoxBlur:function(){this.smartBoxFocus=!1},delSearchHistoryItem:function(t){console.log("affect"),this.searchHistory.splice(t,1)},clearSearchHistory:function(){this.searchHistory=[]},activeListMenuStyle:function(t){return t.length>0?null:{display:"none"}}},Object(r.b)(["setPlayList","setPlaySong","setPlayFlag","setSearchContext","setSearchResult","setSearchLoadingFlag"])),computed:n()({},Object(r.c)({artistDetail:function(t){return t.search.artist},state_searchResult:function(t){return t.search.searchResult},state_searchContext:function(t){return t.search.searchContext},state_searchLoadingFlag:function(t){return t.search.loadingFlag}}))},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"subpage-viewport"},[s("div",{staticClass:"search-bar"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.searchContext,expression:"searchContext",modifiers:{trim:!0}}],attrs:{type:"text",autocomplete:"off",id:"searchInput",placeholder:"音乐/歌手"},domProps:{value:t.searchContext},on:{input:[function(e){e.target.composing||(t.searchContext=e.target.value.trim())},function(e){return t.getSearchSuggest(e.target.value)}],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getSearchResult(e.target.value)},focus:function(e){return t.setInputFocus()},blur:[function(e){return t.setInputBlur()},function(e){return t.$forceUpdate()}]}}),t._v(" "),!t.inputFocus||0==t.searchHistory.length&&0==Object.keys(t.searchSuggest).length?t._e():s("div",{staticClass:"js-smartbox",on:{mouseenter:function(e){return t.setSmartBoxFocus()},mouseleave:function(e){return t.setSmartBoxBlur()}}},[0!=Object.keys(t.searchSuggest).length?s("div",{staticClass:"search-suggest"},t._l(t.searchSuggest.order,function(e,a){return s("div",{key:a,class:t.setSearchSuggestClass(e)},[s("h4",[s("i"),t._v(t._s(t.searchSuggestTitle[e])+"\n                    ")]),t._v(" "),s("div",{staticClass:"list"},t._l(t.searchSuggest[e],function(a,n){return s("div",{key:n,on:{click:function(s){return t.resolveSearchSuggest(e,a)}}},[s("span",{staticClass:"search-suggest-first"},[t._v(t._s(a.name))]),t._v(" "),"songs"===e?s("span",{staticClass:"search-suggest-second"},[t._v("—"+t._s(t.getSearchSuggestArtists(a.artists)))]):t._e(),t._v(" "),"mvs"===e?s("span",{staticClass:"search-suggest-second"},[t._v("—"+t._s(t.getSearchSuggestArtists(a.artists)))]):t._e(),t._v(" "),"albums"===e?s("span",{staticClass:"search-suggest-second"},[t._v("-"+t._s(a.artist.name))]):t._e()])}),0)])}),0):0!=t.searchHistory.length?s("div",{staticClass:"search-history"},[s("div",{staticClass:"search-history-title"},[s("p",[t._v("搜索历史")]),t._v(" "),s("i",{on:{click:function(e){return t.clearSearchHistory()}}})]),t._v(" "),t._l(t.searchHistory,function(e,a){return s("div",{key:a,staticClass:"search-history-item"},[s("p",{on:{click:function(s){return t.getSearchResult(e)}}},[t._v(t._s(e))]),t._v(" "),s("i",{staticClass:"icon-history-item-delete",on:{click:function(e){return t.delSearchHistoryItem(a)}}})])})],2):t._e()]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("p",{staticClass:"hot-search-til"},[t._v("热门搜索：")]),t._v(" "),t._l(t.hots,function(e,a){return s("span",{key:a,staticClass:"hot-search-list",on:{click:function(s){return t.getSearchResult(e)}}},[t._v(t._s(e))])})],2)]),t._v(" "),0!=t.state_searchResult.length?s("SongList",{attrs:{songs:t.state_searchResult,setList:t.setSearchResult}}):t._e(),t._v(" "),t.state_searchLoadingFlag?s("div",{staticClass:"search_loading-mask_box"},[s("LoadingMask")],1):t._e()],1)},staticRenderFns:[]};var f=s("VU/8")(d,v,!1,function(t){s("UPEl")},null,null);e.default=f.exports}});