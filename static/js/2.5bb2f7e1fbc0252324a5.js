webpackJsonp([2],{"2INp":function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=s("Dd8w"),i=s.n(l),n=s("NYxO"),e=s("gyMJ"),o=s("Y62I"),c=s("4www"),r={name:"Playlist",props:{playlistName:{type:String,default:function(){return""}},playlist:{type:Array,default:function(){return[]}},setLoadingFlag:{type:Function,default:function(){}}},methods:i()({},Object(n.b)(["setPlayFlag","setPlayList","setPlaylistSongs","setPlaySong","setShowPlaylistSongsFlag"]),{MPlayCount:function(t){return t<1e4?"播放量："+t:"播放量："+(t/1e4).toFixed(1)+"万"},MSetPlaylistSongs:function(t){var a=this;this.setLoadingFlag(!0),"排行榜"===this.playlistName?Object(c.a)(t.songs).then(function(t){a.setLoadingFlag(!1),a.setPlaylistSongs(t)}).catch(function(t){a.setLoadingFlag(!1),console.error(t.message)}):Object(e.g)(t.id).then(function(t){Object(c.a)(t.data.playlist.tracks).then(function(t){a.setLoadingFlag(!1),a.setPlaylistSongs(t)}).catch(function(t){a.setLoadingFlag(!1),console.error(t.message)})}).catch(function(t){a.setLoadingFlag(!1),console.error(t.message)})},MSetPlaylist:function(t){var a=this;this.setLoadingFlag(!0),"排行榜"===this.playlistName?Object(c.a)(t.songs).then(function(t){a.setLoadingFlag(!1),a.setPlayList(t);for(var s=0;s<t.length;s++)if(t[s].available){a.setPlaySong(t[s]);break}a.setPlayFlag(!0)}).catch(function(t){a.setLoadingFlag(!1),console.error(t.message)}):Object(e.g)(t.id).then(function(t){Object(c.a)(t.data.playlist.tracks).then(function(t){a.setLoadingFlag(!1),a.setPlayList(t);for(var s=0;s<t.length;s++)if(t[s].available){a.setPlaySong(t[s]);break}a.setPlayFlag(!0)}).catch(function(t){a.setLoadingFlag(!1),console.error(t.message)})}).catch(function(t){a.setLoadingFlag(!1),console.error(t.message)})}})},g={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"recommand"},[s("h2",{staticClass:"recommand_title"},[t._v(t._s(t.playlistName))]),t._v(" "),s("div",{staticClass:"recommand_playlist"},t._l(t.playlist,function(a,l){return s("div",{key:l,staticClass:"playlist_item"},[s("div",{staticClass:"item-pic_box"},[s("div",{staticClass:"item-pic"},[s("img",{staticClass:"item-pic_src",attrs:{src:a.picUrl},on:{click:function(s){return t.MSetPlaylistSongs(a)}}}),t._v(" "),s("i",{staticClass:"item-pic_mask"}),t._v(" "),s("i",{staticClass:"item-pic_play-icon",on:{click:function(s){return t.MSetPlaylist(a)}}})])]),t._v(" "),s("h4",{staticClass:"play_item-name",on:{click:function(s){return t.MSetPlaylistSongs(a)}}},[t._v(t._s(a.name))]),t._v(" "),s("div",{staticClass:"play_item-play_count"},[t._v(t._s(t.MPlayCount(a.playCount)))])])}),0)])},staticRenderFns:[]};var d=s("VU/8")(r,g,!1,function(t){s("8U1f")},"data-v-228c73ed",null).exports,y=s("nh2a"),h=s("Zrlr"),u=s.n(h),f=function t(a){var s=a.id,l=a.name,i=a.picUrl,n=a.playCount,e=a.songs;u()(this,t),this.id=s,this.name=l,this.picUrl=i,this.playCount=n,this.songs=e};function m(t){var a=[];return t.tracks&&(a=Object(c.b)(t.tracks)),new f({id:t.id,name:t.name,picUrl:t.coverImgUrl||t.picUrl,playCount:t.playCount,songs:a})}function p(t){for(var a=[],s=0;s<t.length;s++)a[s]=m(t[s]);return a}var v={name:"Recommand",components:{Playlist:d,SongList:y.a,LoadingMask:o.a},data:function(){return{showMaxPlaylistIndex:1,showLoadingMaskFlag:!1}},created:function(){var t=this;if(0===this.leaderboard.length)for(var a=0;a<24;a++)Object(e.f)(a).then(function(a){var s=m(a.data.playlist);t.setLeaderBoard(s)}).catch(function(t){console.error(t.message)});0===this.highqualityPlaylist.length&&Object(e.e)().then(function(a){var s=p(a.data.playlists);t.setHighQualityPlaylist(s)}).catch(function(t){console.error(t.message)}),0===this.recommandPlaylist.length&&Object(e.h)().then(function(a){var s=p(a.data.result);t.setRecommandPlaylist(s)}).catch(function(t){console.error(t.message)}),0===this.topPlaylist.length&&Object(e.o)().then(function(a){var s=p(a.data.playlists);t.setTopPlaylist(s)}).catch(function(t){console.error(t.message)})},computed:i()({},Object(n.c)({leaderboard:function(t){return t.recommand.leaderboard},highqualityPlaylist:function(t){return t.recommand.highqualityPlaylist},recommandPlaylist:function(t){return t.recommand.recommandPlaylist},topPlaylist:function(t){return t.recommand.topPlaylist},playlistSongs:function(t){return t.recommand.playlistSongs}})),methods:i()({},Object(n.b)(["setLeaderBoard","setHighQualityPlaylist","setRecommandPlaylist","setPlayList","setTopPlaylist","setPlaylistSongs"]),{MHandlePlaylistsWheel:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,s=void 0;return function(l){var i=this;clearTimeout(s),s=setTimeout(function(){t.call(i,l)},a)}}(function(t){t.target.scrollTop+t.target.clientHeight>=t.target.scrollHeight-400&&this.showMaxPlaylistIndex<4&&this.showMaxPlaylistIndex++}),MDelAllPlaylistSongs:function(){for(var t=[],a=0,s=0;s<this.palylistSongs.length;s++)this.playlistSongs[s].selected||(t[a++]=this.playlistSongs[s]);this.setPlaylistSongs(t)},MDelPlaylistSongsItem:function(t){var a=this.playlistSongs;a.splice(t,1),this.setPlaylistSongs(a)},MSelAllPlaylistSongs:function(){for(var t=this.playlistSongs,a=0;a<t.length;a++)t[a].selected=!0;this.setPlaylistSongs(t)},MSelPlaylistSongsItem:function(t){var a=this.playlistSongs;a[t].selected=!0,this.setPlaylistSongs(a)},MChangeLoadingMaskFlag:function(t){this.showLoadingMaskFlag=t},MBackToPlaylists:function(){this.setPlaylistSongs([])}})},P={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"subpage_viewport",on:{scroll:t.MHandlePlaylistsWheel}},[0!==t.playlistSongs.length||t.showLoadingMaskFlag?t.showLoadingMaskFlag?t._e():s("div",{staticClass:"playlists_songs"},[s("div",{staticClass:"playlists_songs-back"},[s("i",{staticClass:"playlists_songs-back_icon",on:{click:t.MBackToPlaylists}})]),t._v(" "),s("SongList",{staticStyle:{height:"92%"},attrs:{songs:t.playlistSongs,setList:t.setPlaylistSongs}})],1):s("div",{staticClass:"playlists"},[s("Playlist",{attrs:{playlistName:"排行榜",playlist:t.leaderboard,setLoadingFlag:t.MChangeLoadingMaskFlag}}),t._v(" "),t.showMaxPlaylistIndex>1?s("Playlist",{attrs:{playlistName:"精品歌单",playlist:t.highqualityPlaylist,setLoadingFlag:t.MChangeLoadingMaskFlag}}):t._e(),t._v(" "),t.showMaxPlaylistIndex>2?s("Playlist",{attrs:{playlistName:"推荐歌单",playlist:t.recommandPlaylist,setLoadingFlag:t.MChangeLoadingMaskFlag}}):t._e(),t._v(" "),t.showMaxPlaylistIndex>3?s("Playlist",{attrs:{playlistName:"网友精选碟",playlist:t.topPlaylist,setLoadingFlag:t.MChangeLoadingMaskFlag}}):t._e()],1),t._v(" "),t.showLoadingMaskFlag?s("div",{staticClass:"playlists_loading-mask_box"},[s("LoadingMask")],1):t._e()])},staticRenderFns:[]};var _=s("VU/8")(v,P,!1,function(t){s("JdPS")},"data-v-1c233323",null);a.default=_.exports},"8U1f":function(t,a){},JdPS:function(t,a){},Y62I:function(t,a,s){"use strict";var l={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"lds-roller"},[a("div"),this._v(" "),a("div"),this._v(" "),a("div"),this._v(" "),a("div"),this._v(" "),a("div"),this._v(" "),a("div"),this._v(" "),a("div"),this._v(" "),a("div")])}]};var i=s("VU/8")({name:"LoadingMask"},l,!1,function(t){s("tB73")},"data-v-6aa32653",null);a.a=i.exports},tB73:function(t,a){}});